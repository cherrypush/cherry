<!-- Contributions -->
<button
  type="button"
  data-dropdown-toggle="notification-dropdown"
  class="p-2 mr-1 text-gray-500 rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600"
>
  <span class="sr-only">View notifications</span>
  <!-- Heart icon -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
    />
  </svg>
</button>

<!-- Dropdown menu -->
<div
  class="hidden overflow-hidden z-50 my-4 max-w-sm text-base list-none bg-white rounded divide-y divide-gray-100 shadow-lg dark:divide-gray-600 dark:bg-gray-700"
  id="notification-dropdown"
>
  <div
    class="block py-2 px-4 text-base font-medium text-center text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
  >
    Contributions
  </div>
  <div>
    <% contributions.each do |contribution| %>
      <a
        href="<%= github_commit_url(contribution.project.name, contribution.commit_sha) %>"
        target="_blank"
        class="flex py-3 px-4 border-b hover:bg-gray-100 dark:hover:bg-gray-600 dark:border-gray-600"
      >
        <div class="flex-shrink-0">
          <% karma = contribution.metrics.values.sum %>
          <div
            class="relative inline-flex items-center justify-center w-10 h-10 overflow-hidden rounded-full <%= karma.positive? ? 'bg-red-700' : 'bg-green-500' %>"
          >
            <span class="font-medium text-gray-600 dark:text-gray-300"><%= sprintf('%+d', karma) %></span>
          </div>
        </div>
        <div class="pl-3 w-full max-w-md">
          <div class="text-gray-500 font-normal text-sm mb-1.5 dark:text-gray-400">
            <%= contribution.project.name %>
            <% contribution.metrics.each do |metric_name, value| %>
              <div>
                <span class="font-semibold text-gray-900 dark:text-white"><%= metric_name %></span>:
                <%= sprintf('%+d', value) %>
              </div>
            <% end %>
          </div>
          <div class="text-xs font-medium text-primary-700 dark:text-primary-400">
            <%= time_ago_in_words contribution.commit_date %> ago
          </div>
        </div>
      </a>
    <% end %>

    <a
      href="<%= user_contributions_path %>"
      class="block py-2 text-base font-normal text-center text-gray-900 bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:text-white dark:hover:underline"
    >
      <div class="inline-flex items-center">
        <svg
          aria-hidden="true"
          class="mr-2 w-5 h-5"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
          <path
            fill-rule="evenodd"
            d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
            clip-rule="evenodd"
          ></path>
        </svg>
        View all
      </div>
    </a>
  </div>
</div>
